title: API access tokens
permissions: [user]

methods:
  read:
    title: Read tokens
    params:
      - name: options
        schema:
          type: object

  create:
    title: Generate new token
    params:
      - name: name
        required: true
        schema:
          type: string

  delete:
    title: Remove token
    params:
      - name: tokenId
        required: true
        schema:
          type: string

  setEnabled:
    title: Set token enabled
    params:
      - name: tokenId
        required: true
        schema:
          type: string
      - name: enabled
        required: true
        schema:
          type: boolean

  getPermissions:
    title: Get token permissions
    params:
      - name: tokenId
        required: true
        schema:
          type: string

  setPermissions:
    title: Set token permissions
    description: |-
      Set API token permissions. Old permissions will be replaced with the new.
    params:
      - name: tokenId
        description: Token ID.
        required: true
        schema:
          type: string
      - name: permissions
        description: |-
          Object contains permissions to set:
          -   Key <string\> Permission name.
          -   Value <boolean\> `true` to enable permission.
        required: true
        schema:
          type: object
          additionalProperties: { type: boolean }

  updatePermissions:
    title: Update token permissions
    description: Update token permissions. Permissions will be added or replaced.
    params:
      - name: tokenId
        description: Token ID.
        required: true
        schema:
          type: string
      - name: permissions
        description: |-
          Object contains permissions to update:
          -   Key <string\> Permission name.
          -   Value <boolean\> `true` to enable permission.
        required: true
        schema:
          type: object
          additionalProperties: { type: boolean }
