title: API access keys
roles: [user]

methods:
  read:
    title: Read API keys
    params:
      - name: options
        schema:
          read:
            fields:
              id: { type: string }
              name: { type: string, operator: like, sortable: true }
              created: { type: string, sortable: true }
              last_activity: { type: string, sortable: true }
              enabled: { type: boolean, operator: "=", sortable: true }
            order_by: [[name, asc]]
            limit: { maxLimit: 100 }

  create:
    title: Generate new key
    params:
      - name: name
        required: true
        schema:
          type: string

  delete:
    title: Remove key
    params:
      - name: key_id
        required: true
        schema:
          type: string

  set-enabled:
    title: Set key enabled
    params:
      - name: key_id
        required: true
        schema:
          type: string
      - name: enabled
        required: true
        schema:
          type: boolean

  get-roles:
    title: Get key roles
    params:
      - name: key_id
        required: true
        schema:
          type: string

  set-roles:
    title: Set key roles
    description: |-
      Set API key roles. Old roles will be replaced with the new.
    params:
      - name: key_id
        description: Key id.
        required: true
        schema:
          type: string
      - name: roles
        description: |-
          Object contains roles to set:
          -   Key <string\> Role name.
          -   Value <boolean\> `true` to enable role.
        required: true
        schema:
          type: object
          additionalProperties: { type: boolean }

  update-roles:
    title: Update key roles
    description: Update key roles. Roles will be added or replaced.
    params:
      - name: key_id
        description: Key id.
        required: true
        schema:
          type: string
      - name: roles
        description: |-
          Object contains roles to update:
          -   Key <string\> Role name.
          -   Value <boolean\> `true` to enable role.
        required: true
        schema:
          type: object
          additionalProperties: { type: boolean }
