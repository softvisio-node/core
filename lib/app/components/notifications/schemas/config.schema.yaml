type: object
properties:
  smtp: { type: string, format: uri-whatwg }
  telegramBotKey: { type: ["null", string] }

  notifications:
    anyOf:
      - { type: "null" }
      - type: object
        additionalProperties:
          type: object
          properties:
            name: { type: string }
            description: { type: string }
            channels:
              type: object
              properties:
                internal: { type: boolean }
                email: { type: boolean }
                telegram: { type: boolean }
                push: { type: boolean }
              required: [internal, email, telegram, push]
              additionalProperties: false
          required: [name, description, channels]
          additionalProperties: false

  firebase:
    anyOf:
      - { type: "null" }
      - type: object
        properties:
          type: { const: service_account }
          project_id: { type: string }
          private_key_id: { type: string }
          private_key: { type: string }
          client_email: { type: string, format: email }
          client_id: { type: string }
          auth_uri: { type: string, format: uri }
          token_uri: { type: string, format: uri }
          auth_provider_x509_cert_url: { type: string, format: uri }
          client_x509_cert_url: { type: string, format: uri }
        required: [type, project_id, private_key_id, private_key, client_email, client_id, auth_uri, token_uri, auth_provider_x509_cert_url, client_x509_cert_url]
        additionalProperties: false

required: [smtp, telegramBotKey, notifications, firebase]
additionalProperties: false
