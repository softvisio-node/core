title: Storage

methods:
  upload-file:
    title: Upload file to the storage
    params:
      - name: path
        required: true
        schema:
          type: string
          path: { root: false, folder: false }
      - name: file
        required: true
        schema:
          file: { maxSize: 50 GB }
      - name: options
        schema:
          type: object
          properties:
            cwd: { type: string, path: { root: true, folder: false } }
            lastModified: { type: string, format: date-time }
            contentType: { type: string }
            cacheControl: { type: string }
            contentDisposition: { type: string }
            expires: { type: string, format: date-time }
            maxAge: { type: string, format: interval }
            inactiveMaxAge: { type: string, format: interval }
            encrypt: { type: boolean }
          additionalProperties: false

  file-exists:
    title: Chheck file exists in the storage
    params:
      - name: path
        required: true
        schema:
          type: string
          path: { root: false, folder: false }
      - name: options
        schema:
          type: object
          properties:
            cwd: { type: string, path: { root: true, folder: false } }
            checkImage: { type: boolean }
          additionalProperties: false

  get-file-metadata:
    title: Get file meta data
    params:
      - name: path
        required: true
        schema:
          type: string
          path: { root: false, folder: false }
      - name: options
        schema:
          type: object
          properties:
            cwd: { type: string, path: { root: true, folder: false } }
            checkImage: { type: boolean }
          additionalProperties: false

  glob:
    title: Search files using glob patterns
    params:
      - name: patterns
        required: true
        schema:
          anyOf:
            - { type: string, format: glob-pattern }
            - type: array
              items: { type: string, format: glob-pattern }
              minItems: 1
      - name: options
        schema:
          type: object
          properties:
            cwd: { type: string, path: { root: true, folder: false } }
          additionalProperties: false

  delete-files:
    title: Delete files using glob patterns
    params:
      - name: patterns
        required: true
        schema:
          anyOf:
            - { type: string, format: glob-pattern }
            - type: array
              items: { type: string, format: glob-pattern }
              minItems: 1
      - name: options
        schema:
          type: object
          properties:
            cwd: { type: string, path: { root: true, folder: false } }
          additionalProperties: false
