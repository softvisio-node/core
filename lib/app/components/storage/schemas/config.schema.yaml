anyOf:
  - type: object
    properties:
      type: { const: local }

    additionalProperties: false
    required: [type]

  - type: object
    properties:
      type: { const: google }
      serviceAccount:
        type: object
        properties:
          type: { type: string }
          project_id: { type: string }
          private_key_id: { type: string }
          private_key: { type: string }
          client_email: { type: string }
          client_id: { type: string }
          auth_uri: { type: string }
          token_uri: { type: string }
          auth_provider_x509_cert_url: { type: string }
          client_x509_cert_url: { type: string }

        additionalProperties: false
        required: [project_id, private_key, client_email, token_uri]

      buckets:
        type: object
        additionalProperties:
          type: object
          properties:
            bucket: { type: string, format: kebab-case }
            predefinedAcl:
              anyOf:
                - type: "null"
                - enum: [authenticatedRead, private, projectPrivate, publicRead, publicReadWrite]
            predefinedDefaultObjectAcl:
              anyOf:
                - type: "null"
                - enum: [authenticatedRead, bucketOwnerFullControl, bucketOwnerRead, private, projectPrivate, publicRead]

          addirionslProperties: false
          required: []

    additionalProperties: false
    required: [type, serviceAccount, buckets]
