title: Notifications
emits:
  - notifications # emitted when new notifications available

methods:
  get-user-notifications-profile:
    title: Get user notifications settings
    permission: user

  set-user-notification-channel-enabled:
    title: Set user user notification channel enabled
    permission: user
    params:
      - name: type
        required: true
        schema:
          type: string
      - name: channel
        required: true
        schema:
          type: string
          enum: [internal, email, telegram, push]
      - name: enabled
        required: true
        schema:
          type: boolean

  read:
    title: Read notifications
    permission: user
    params:
      - name: options
        required: true
        schema:
          read:
            fields:
              done: { type: boolean, operator: "=" }
            order_by: [["created", "desc"]]
            limit: { maxLimit: 100 }

  update:
    title: Update notification
    permission: user
    params:
      - name: notification_id
        required: true
        schema:
          type: string
      - name: options
        required: true
        schema:
          type: object
          properties:
            done: { type: boolean }

          additionalProperties: false
          minProperties: 1

  update-all:
    title: Update all notification
    permission: user
    params:
      - name: options
        required: true
        schema:
          type: object
          properties:
            done: { type: boolean }

          additionalProperties: false
          minProperties: 1

  delete:
    title: Delete notifications
    permission: user
    params:
      - name: options
        schema:
          type: object
          properties:
            id: { type: string }
            done: { type: boolean }

          additionalProperties: false
          minProperties: 1
