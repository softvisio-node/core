title: Session

methods:
  check-authorization:
    title: Check authorization

  signin:
    title: Signin
    params:
      - name: credentials
        required: true
        schema:
          anyOf:
            - type: object
              properties:
                email: { type: string, format: email }
                password: { type: string }
              required: [email, password]
              additionalProperties: false
            - type: object
              properties:
                oauth_provider: { enum: [google, facebook, github] }
                oauth_code: { type: string }
                oauth_redirect_uri: { type: string, format: uri }
              required: [oauth_provider, oauth_code, oauth_redirect_uri]
              additionalProperties: false

  authorize:
    title: Authorize session
    permission: user
    params:
      - name: credentials
        required: true
        schema:
          anyOf:
            - type: object
              properties:
                password: { type: string }
              required: [password]
              additionalProperties: false
            - type: object
              properties:
                oauth_provider: { enum: [google, facebook, github] }
                oauth_code: { type: string }
                oauth_redirect_uri: { type: string, format: uri }
              required: [oauth_provider, oauth_code, oauth_redirect_uri]
              additionalProperties: false

  signout:
    title: Signout
    permission: user

  signup:
    title: Signup
    permission: guest
    params:
      - name: email
        required: true
        schema:
          anyOf:
            - { type: string, format: email }
            - type: object
              properties:
                oauth_provider: { enum: [google, facebook, github] }
                oauth_code: { type: string }
                oauth_redirect_uri: { type: string, format: uri }
              required: [oauth_provider, oauth_code, oauth_redirect_uri]
              additionalProperties: false
      - name: fields
        schema:
          type: object
          properties:
            password: { type: string }
            locale: { type: string }
            telegram_username: { type: string }

  send-confirmation-email:
    title: Send confirmation email

  confirm-email-by-token:
    title: Confirm user email using email confirmation token
    params:
      - name: token
        description: Email confirmation token.
        required: true
        schema:
          type: string

  send-password-recovery-email:
    title: Send password recovery email
    params:
      - name: email
        required: true
        schema: { type: string, format: email }

  set-password-by-token:
    title: Set user password using password recovery token
    params:
      - name: token
        required: true
        schema:
          type: string
      - name: password
        required: true
        schema:
          type: string

  register-push-notifications-token:
    title: Register push notifications token
    params:
      - name: token
        required: true
        schema: { type: string }
