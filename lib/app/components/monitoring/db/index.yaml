module: monitoring
type: pgsql
patch: ~

emits: ~

cron:
  monitoring-cleanup:
    cron: "0 1 * * *" # 01:00 everyday
    timezone: ~
    query: |-
      DELETE FROM monitoring_instance WHERE last_activity < CURRENT_TIMESTAMP - INTERVAL '30 days';
      DELETE FROM monitoring_instance_stats WHERE date < CURRENT_TIMESTAMP - INTERVAL '30 days';
      DELETE FROM monitoring_method_stats WHERE date < CURRENT_TIMESTAMP - INTERVAL '30 days';
      DELETE FROM monitoring_method_exception WHERE date < CURRENT_TIMESTAMP - INTERVAL '30 days';
