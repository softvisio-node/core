title: Nginx

methods:
  register:
    title: Register nginx server
    persistentConnectionRequired: true
    params:
      - name: server_id
        required: true
        schema:
          type: string
          fotmat: kebab-case

      - name: options
        required: true
        schema:
          type: object
          properties:
            serverNames:
              anyOf:
                - type: "null"
                - const: "*"
                - { type: string, format: nginx-server-name }
                - { type: array, items: { type: string, format: nginx-server-name }, minItems: 1, uniqueItems: true }

            streamPorts:
              anyOf:
                - type: "null"
                - { type: array, items: { type: number, format: ip-port }, minItems: 1, uniqueItems: true }

            upstreamHttpPort: { type: string, format: ip-port }
            maxBodySize: { type: string, format: digital-size }
            cacheEnabled: { type: boolean }
            cacheStatus: { type: boolean }
            cacheBypass: { type: boolean }

          additionalProperties: false
          required: [serverId]
