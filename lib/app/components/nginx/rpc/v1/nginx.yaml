title: Nginx

methods:
  register:
    title: Register nginx server
    persistentConnectionRequired: true
    params:
      - name: server_id
        required: true
        schema:
          type: string
          fotmat: kebab-case

      - name: options
        required: true
        schema:
          type: object
          properties:
            type: { enum: [http, tcp, udp] }

            serverName:
              anyOf:
                - type: "null"
                - const: "*"
                - { type: string, format: nginx-server-name }
                - { type: array, items: { type: string, format: nginx-server-name }, minItems: 1, uniqueItems: true }

            upstreamPort: { type: ["null", number], format: ip-port }
            upstreamProxyProtocol: { type: boolean }

            maxBodySize: { type: string, format: digital-size }
            cacheEnabled: { type: boolean }
            cacheBypass: { type: boolean }
            sslEnabled: { type: boolean }

          additionalProperties: false
          required: [type]
