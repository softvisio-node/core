title: Telegram bot links

aclResolvers:
  telegram-bot-link: SELECT telegram_bot.acl_id AS id FROM telegram_bot_link, telegram_bot WHERE telegram_bot_link.telegram_bot_id = telegram_bot.id AND telegram_bot_link.id = ?

methods:
  get-links-list:
    title: Read telegram bot links
    permission: telegram/bot/links:read
    params:
      - name: options
        required: true
        schema:
          read:
            fields:
              telegram_bot_id: { type: string, format: int64, required: true, operator: "=", aclResolver: telegram-bot }
              name: { type: string, operator: "like", sortable: true }
              created: { sortable: true }
              last_user_created: { sortable: true }
              total_subscribed_users: { sortable: true }
            order_by: { last_user_created, desc }
            limit: { maxLimit: 100 }

  create-link:
    title: Createe link
    permission: telegram/bot/links:create
    params:
      - name: telegram_bot_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot }
      - name: options
        required: true
        schema:
          type: object
          properties:
            name: { type: string }
            description: { type: string }
          additionalProperties: false
          required: [name]

  get-link-stats:
    title: get telegram bot link stats
    permission: telegram/bot/links:read
    params:
      - name: telegram_bot_link_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot-link }
      - name: period
        required: true
        schema: { enum: ["7 days", "3 months", "1 year"] }

  update-link:
    title: Update telegram bot link
    permission: telegram/bot/links:update
    params:
      - name: teleram_bot_link_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot-link }
      - name: options
        required: true
        schema:
          type: object
          properties:
            name: { type: string }
            description: { type: string }
          minProperties: 1
          additionalProperties: false

  delete-link:
    title: Delete telegram bot link
    permission: telegram/bot/links:delete
    params:
      - name: telegram_bot_link_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot-link }
