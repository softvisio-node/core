title: Telegram bot links

aclResolvers:
  telegram-bot-user: SELECT telegram_bot.acl_id AS id FROM telegram_bot_user, telegram_bot WHERE telegram_bot_user.telegram_bot_id = telegram_bot.id AND telegram_bot_user.id = ?

methods:
  get-users-list:
    title: Read telegram bot links
    permission: telegram/bot/users:read
    params:
      - name: options
        required: true
        schema:
          read:
            fields:
              telegram_bot_id: { type: string, format: int64, required: true, operator: "=", aclResolver: telegram-bot }
              is_bot: { type: boolean, operator: "=" }
              username: { type: string, operator: like, sortable: true }
              first_name: { type: string, operator: like, sortable: true }
              last_name: { type: string, operator: like, sortable: true }
              phone: { type: string, operator: like, sortable: true }
              created: { type: string, sortable: true }
              last_activity: { type: string, sortable: true }
              subscribed: { type: boolean, operator: "=" }
              banned: { type: boolean, operator: "=" }
            order_by: [[username, asc]]
            limit: { maxLimit: 100 }

  get-user:
    title: Get telegram bot link data
    permission: telegram/bot/users:read
    params:
      - name: telegram_bot_link_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot-user }

  update-user:
    title: Update telegram bot link
    permission: telegram/bot/users:update
    params:
      - name: teleram_bot_link_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot-user }
      - name: options
        required: true
        schema:
          type: object
          properties:
            name: { type: string }
            description: { type: string }
          minProperties: 1
          additionalProperties: false
