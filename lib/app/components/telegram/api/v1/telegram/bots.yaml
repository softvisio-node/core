title: Application telegram bots management

aclResolvers:
  telegram-bot: SELECT acl_id AS id FROM telegram_bot WHERE id = ?

methods:
  read:
    title: Read telegram bots
    permission: users
    params:
      - name: options
        schema:
          read:
            fields:
              type: { type: string, sortable: true }
              static: { type: string, sortable: true }
              name: { type: string, operator: like, sortable: true }
              telegram_username: { type: string, sortable: true }
              total_users: { type: string, sortable: true }
              total_subscribed_users: { type: string, sortable: true }
              started: { type: string, sortable: true }
              error: { type: string, sortable: true }
            order_by: [["name", "asc"]]
            limit: { maxLimit: 100 }

  set-bot-started:
    title: Start / stop bot
    permission: telegram/bot:update
    params:
      - name: bot_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot }
      - name: started
        required: true
        schema: { type: boolean }

  delete-bot:
    title: Delete bot
    permission: telegram/bot:delete
    params:
      - name: bot_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot }

  get-bot:
    title: Get bot data
    permission: telegram/bot:read
    params:
      - name: bot_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot }

  get-bot-stats:
    title: Get bot subscribe stats
    permission: telegram/bot:read
    params:
      - name: bot_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot }
      - name: period
        required: true
        schema: { enum: ["7 days", "3 months", "1 year"] }

  update-bot-details:
    title: Update bot details
    permission: telegram/bot:update
    params:
      - name: bot_id
        required: true
        schema: { type: string, format: int64, aclResolver: telegram-bot }
      - name: options
        required: true
        schema:
          type: object
          properties:
            name: { type: string, maxLength: 64 }
            short_description: { type: string, maxLength: 120 }
            description: { type: string, maxLength: 512 }
          minProperties: 1
          additionalProperties: false
