summary: App users management.
permissions: [admin]

methods:
  read:
    summary: Read users.
    params:
      - name: options
        schema:
          apiRead:
            id: { type: string, conditions: ["="], sortable: true }
            search: { type: string, conditions: ["like"] }
            name: { sortable: true }
            created: { sortable: true }
            enabled: { sortable: true }

  create:
    summary: Create user.
    params:
      - name: fields
        required: true
        schema:
          type: object
          properties:
            username: { type: string }
            password: { type: string }
            enabled: { type: boolean }
            permissions:
              type: object
              additionalProperties: { type: boolean }
            email: { type: string }
            telegram_name: { type: string }
          required:
            - username

  delete:
    summary: Remove user.
    params:
      - name: userId
        required: true
        schema:
          type: string

  set-enabled:
    summary: Set user enabled.
    params:
      - name: userId
        summary: User id or name.
        required: true
        schema:
          type: string
      - name: enabled
        required: true
        schema:
          type: boolean

  set-password:
    summary: Set user password.
    params:
      - name: userId
        summary: User id or name.
        required: true
        schema:
          type: string
      - name: pasword
        schema:
          type: string

  get-permissions:
    summary: Get user permissions.
    params:
      - name: userId
        required: true
        schema:
          type: string

  set-permissions:
    summary: Set user permissions.
    params:
      - name: userId
        required: true
        schema:
          type: string
      - name: permissions
        required: true
        schema:
          type: object
          additionalProperties: { type: boolean }

  update-permissions:
    summary: Set user permissions.
    params:
      - name: userId
        required: true
        schema:
          type: string
      - name: permissions
        required: true
        schema:
          type: object
          additionalProperties: { type: boolean }

  suggest:
    summary: Suggest user name.
    params:
      - name: options
        schema:
          type: object
          properties:
            where:
              type: object
              properties:
                name:
                  type: array
                  items:
                    - operator:
                        type: string
                        enum:
                          - like
                    - name:
                        type: string

  set-username:
    summary: Change user name.
    params:
      - name: user_id
        required: true
        schema:
          type: string
      - name: new_username
        required: true
        schema:
          type: string
      - name: new_password
        schema:
          type: string
