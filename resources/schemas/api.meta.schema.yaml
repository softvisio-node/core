# module
- $id: module
  type: object
  properties:
    summary: { $ref: "components#/summary" }
    description: { $ref: "components#/desc" }
    extends: { type: string }
    permissions: { $ref: "components#/permissions" }

    methods:
      type: object
      additionalProperties:
        type: object
        properties:
          summary: { $ref: "components#/summary" }
          description: { $ref: "components#/desc" }
          validateParams: { type: "boolean" }
          permissions: { $ref: "components#/permissions" }
          params:
            params:
            type: array
            minItems: 1
            items:
              type: object
              properties:
                name: { type: string }
                summary: { $ref: "components#/summary" }
                description: { $ref: "components#/desc" }
                required: { type: boolean }
                schema: { type: object }
              required: [name, schema]
              additionalProperties: false
          logApiCalls: { type: boolean }
          activeRequestsLimit: { type: integer, minimum: 0 }
          activeRequestsUserLimit: { type: integer, minimum: 0 }
          upload: { type: boolean }
          uploadMaxSize: { type: integer, minimum: 1 }
        required: [summary]
        additionalProperties: false

  required: [summary]
  additionalProperties: false

# shared components
- $id: components
  summary:
    type: string

  desc:
    type: string

  permissions:
    type: array
    items:
      type: string
      pattern: "^(?:[*]|[a-z-]+)$"
    minItems: 1

  params:
    type: array
    minItems: 1
    items:
      type: object
      properties:
        name: { type: string }
        summary: { $ref: "components#/summary" }
        description: { $ref: "components#/desc" }
        required: { type: boolean }
        schema: { type: object }
      required: [name, schema]
      additionalProperties: false
