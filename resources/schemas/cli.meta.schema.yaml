anyOf:
  # commands
  - type: object
    properties:
      summary: { type: string }
      description: { type: string }
      commands:
        type: object
        additionalProperties: true
        minProperties: 1
    required: [summary, commands]
    additionalProperties: false

  # options
  - type: object
    properties:
      summary: { type: string }
      description: { type: string }

      options:
        type: object
        additionalProperties:
          type: object
          properties:
            short:
              anyOf:
                - { type: boolean, const: false }
                - { type: string, minLength: 1, maxLength: 1 }
            summary: { type: string }
            default: { type: [string, integer, boolean] }
            minItems: { type: integer, minimum: 0 }
            maxItems:
              anyOf:
                - { type: boolean, const: false }
                - { type: integer, minimum: 1 }
            schema: { type: object }
          required: [summary, schema]
          additionalProperties: false

      arguments:
        type: object
        additionalProperties:
          type: object
          properties:
            summary: { type: string }
            default: { type: [string, integer] }
            minItems: { type: integer, minimum: 0 }
            maxItems:
              anyOf:
                - { type: boolean, const: false }
                - { type: integer, minimum: 1 }
            schema: { type: object }
          required: [summary, schema]
          additionalProperties: false
    additionalProperties: false
