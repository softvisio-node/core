anyOf:
  # commands
  - type: object
    properties:
      title: { type: string }
      description: { type: string }
      commands:
        type: object
        additionalProperties:
          anyOf:
            - {}
            - type: array
              items:
                - { type: string, minLength: 1, maxLength: 1 }
                - {}
        minProperties: 1
    required: [title, commands]
    additionalProperties: false

  # command
  - type: object
    properties:
      title: { type: string }
      description: { type: string }

      # options
      options:
        type: object
        additionalProperties:
          type: object
          properties:
            short:
              anyOf:
                - { type: boolean, const: false }
                - { type: string, minLength: 1, maxLength: 1 }
            description: { type: string }
            default: { type: [string, integer, boolean] }
            minItems: { type: integer, minimum: 0 }
            maxItems:
              anyOf:
                - { type: boolean, const: false }
                - { type: integer, minimum: 1 }
            schema: { type: object }
          required: [description, schema]
          additionalProperties: false

      # arguments
      arguments:
        type: object
        additionalProperties:
          type: object
          properties:
            description: { type: string }
            default: { type: [string, integer] }
            minItems: { type: integer, minimum: 0 }
            maxItems:
              anyOf:
                - { type: boolean, const: false }
                - { type: integer, minimum: 1 }
            schema: { type: object }
          required: [description, schema]
          additionalProperties: false
    additionalProperties: false
